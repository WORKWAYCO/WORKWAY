# WORKWAY Tenant State Durable Object
#
# Provides per-tenant state isolation and rate limiting.
# Each tenant gets their own Durable Object instance.
#
# Features:
# - Per-tenant rate limiting (noisy neighbor protection)
# - Tenant resource quotas
# - Usage tracking

name = "workway-tenant-state"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Durable Object binding
[[durable_objects.bindings]]
name = "TENANT_STATE"
class_name = "TenantState"

# Durable Object migrations
[[migrations]]
tag = "v1"
new_classes = ["TenantState"]

# KV for tenant metadata (quotas, tiers)
[[kv_namespaces]]
binding = "TENANT_METADATA"
id = "d22079f994c34a5e9a8a77fadef6bee4"

[vars]
# Default rate limits
DEFAULT_RATE_LIMIT = "1000"
DEFAULT_RATE_WINDOW_SECONDS = "60"
