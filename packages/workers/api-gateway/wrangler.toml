# WORKWAY API Gateway
#
# Public API for triggering WORKWAY workflows from external consumers.
# Deployed to: api.workway.co

name = "workway-api-gateway"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Production route
# routes = [{ pattern = "api.workway.co/*", zone_name = "workway.co" }]

# KV Namespaces
[[kv_namespaces]]
binding = "API_KEYS"
id = "126746b45e274282a71fba77013be8d3"

[[kv_namespaces]]
binding = "IDEMPOTENCY"
id = "651ca58110834aa1892bd9f5a95596e9"

[[kv_namespaces]]
binding = "WORKFLOW_STORAGE"
id = "7e1d2080a29f420782e73432d72a284f"

# Workers AI
[ai]
binding = "AI"

# Environment variables (set via wrangler secret for production)
# [vars]
# ENVIRONMENT = "production"

# Development overrides
# [env.dev]
# name = "workway-api-gateway-dev"
